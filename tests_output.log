============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0
rootdir: /opt/nyxos
plugins: asyncio-1.3.0, anyio-4.12.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 163 items

tests/test_admin_auth.py ...                                             [  1%]
tests/test_auth_lockdown.py ....                                         [  4%]
tests/test_backup_manager.py ..                                          [  5%]
tests/test_backup_token_logic.py ..                                      [  6%]
tests/test_bar_management.py ....                                        [  9%]
tests/test_bar_optimization.py ..                                        [ 10%]
tests/test_bar_persistence_robustness.py ...                             [ 12%]
tests/test_bar_touch.py ..                                               [ 13%]
tests/test_channel_management.py .....                                   [ 16%]
tests/test_check_fix.py ..                                               [ 17%]
tests/test_cleanup_crash.py .                                            [ 18%]
tests/test_command_handler.py .....                                      [ 21%]
tests/test_command_parity.py .......                                     [ 25%]
tests/test_console_duplication.py ..                                     [ 26%]
tests/test_console_notification.py .....                                 [ 30%]
tests/test_console_sync.py ...                                           [ 31%]
tests/test_database.py ......                                            [ 35%]
tests/test_drop_notification.py .                                        [ 36%]
tests/test_drop_optimization.py ..                                       [ 37%]
tests/test_ghost_check_v2.py .                                           [ 38%]
tests/test_global_auth_bypass.py ..                                      [ 39%]
tests/test_global_update.py ..                                           [ 40%]
tests/test_good_bot.py ..                                                [ 41%]
tests/test_helpers.py .....                                              [ 44%]
tests/test_idle_sleep_toggle.py ...                                      [ 46%]
tests/test_is_admin.py ....                                              [ 49%]
tests/test_master_bar_restoration.py .                                   [ 49%]
tests/test_memory_creation.py ....                                       [ 52%]
tests/test_memory_manager.py ....                                        [ 54%]
tests/test_mention_logic.py ...                                          [ 56%]
tests/test_message_processor.py ......                                   [ 60%]
tests/test_newline_sanitization.py ....                                  [ 62%]
tests/test_nuke_database.py .                                            [ 63%]
tests/test_pk_admin_auth.py ...                                          [ 65%]
tests/test_pk_redundancy.py ..                                           [ 66%]
tests/test_pluralkit_config.py .....                                     [ 69%]
tests/test_rate_limiter.py ....                                          [ 71%]
tests/test_reboot_logic.py ...                                           [ 73%]
tests/test_requested_rate_limits.py ..........                           [ 79%]
tests/test_services.py .....                                             [ 82%]
tests/test_slash_commands.py ....                                        [ 85%]
tests/test_slash_commands_backup.py ..                                   [ 86%]
tests/test_smart_startup.py ...                                          [ 88%]
tests/test_startup_safety.py .                                           [ 88%]
tests/test_startup_sync.py ..                                            [ 90%]
tests/test_startup_verification.py .                                     [ 90%]
tests/test_status_bar_view.py ....                                       [ 93%]
tests/test_status_commands.py ..                                         [ 94%]
tests/test_ui.py ....                                                    [ 96%]
tests/test_uplink_formatting.py ..                                       [ 98%]
tests/test_view_restoration.py .                                         [ 98%]
tests/test_wakeup_logic.py .                                             [ 99%]
tests/test_window_persistence.py .                                       [100%]

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/discord/player.py:30
  /opt/nyxos/.venv/lib/python3.12/site-packages/discord/player.py:30: DeprecationWarning: 'audioop' is deprecated and slated for removal in Python 3.13
    import audioop

tests/test_check_fix.py::TestCheckFix::test_drop_check_already_merged
tests/test_check_fix.py::TestCheckFix::test_drop_check_already_merged
tests/test_check_fix.py::TestCheckFix::test_drop_check_already_merged
tests/test_check_fix.py::TestCheckFix::test_drop_check_not_merged
  /opt/nyxos/database.py:143: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    c.execute("""

tests/test_check_fix.py: 8 warnings
tests/test_console_notification.py: 2 warnings
tests/test_database.py: 5 warnings
  /opt/nyxos/database.py:248: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    c.execute("""

tests/test_database.py::TestDatabase::test_active_bars_crud
tests/test_database.py::TestDatabase::test_active_bars_crud
tests/test_database.py::TestDatabase::test_bar_history
tests/test_database.py::TestDatabase::test_bar_history
  /opt/nyxos/database.py:271: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    c.execute("INSERT INTO bar_history (channel_id, content, timestamp) VALUES (?, ?, ?)",

tests/test_database.py::TestDatabase::test_context_buffers
tests/test_database.py::TestDatabase::test_context_buffers
tests/test_memory_creation.py::TestMemoryManager::test_clear_memory
tests/test_memory_creation.py::TestMemoryManager::test_wipe_memories
tests/test_memory_creation.py::TestMemoryManager::test_wipe_memories
tests/test_memory_creation.py::TestMemoryManager::test_write_context_buffer
tests/test_memory_creation.py::TestMemoryManager::test_write_response_append
  /opt/nyxos/database.py:540: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    c.execute("""

tests/test_database.py::TestDatabase::test_context_buffers
tests/test_memory_creation.py::TestMemoryManager::test_write_response_append
  /opt/nyxos/database.py:564: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    c.execute("""

tests/test_drop_notification.py::TestDropStatusBarNotification::test_drop_status_bar_clears_notification
  /opt/nyxos/NyxOS.py:485: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
  Coroutine created at (most recent call last)
    File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
      return self._loop.run_until_complete(task)
    File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
      self.run_forever()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
      self._run_once()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 1979, in _run_once
      handle._run()
    File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
      self._context.run(self._callback, *self._args)
    File "/usr/lib/python3.12/unittest/mock.py", line 1407, in patched
      return await func(*newargs, **newkeywargs)
    File "/opt/nyxos/tests/test_drop_notification.py", line 63, in test_drop_status_bar_clears_notification
      await self.client.drop_status_bar(channel_id, move_bar=True, move_check=True, manual=True)
    File "/opt/nyxos/NyxOS.py", line 485, in drop_status_bar
      async for last_msg in channel.history(limit=1):
    File "/usr/lib/python3.12/unittest/mock.py", line 1134, in __call__
      return self._mock_call(*args, **kwargs)
    File "/usr/lib/python3.12/unittest/mock.py", line 1138, in _mock_call
      return self._execute_mock_call(*args, **kwargs)
    async for last_msg in channel.history(limit=1):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_good_bot.py::TestGoodBot::test_good_bot_trigger
  /opt/nyxos/NyxOS.py:4227: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
  Coroutine created at (most recent call last)
    File "/usr/lib/python3.12/unittest/async_case.py", line 112, in _callMaybeAsync
      return self._asyncioRunner.run(
    File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
      return self._loop.run_until_complete(task)
    File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
      self.run_forever()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
      self._run_once()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 1979, in _run_once
      handle._run()
    File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
      self._context.run(self._callback, *self._args)
    File "/opt/nyxos/tests/test_good_bot.py", line 58, in test_good_bot_trigger
      await NyxOS.on_message(message)
    File "/opt/nyxos/NyxOS.py", line 4227, in on_message
      client.schedule_next_heartbeat()
    File "/usr/lib/python3.12/unittest/mock.py", line 1134, in __call__
      return self._mock_call(*args, **kwargs)
    File "/usr/lib/python3.12/unittest/mock.py", line 1138, in _mock_call
      return self._execute_mock_call(*args, **kwargs)
    client.schedule_next_heartbeat()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_good_bot.py::TestGoodBot::test_good_bot_trigger
  /opt/nyxos/tests/test_good_bot.py:58: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
  Coroutine created at (most recent call last)
    File "/usr/lib/python3.12/unittest/async_case.py", line 112, in _callMaybeAsync
      return self._asyncioRunner.run(
    File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
      return self._loop.run_until_complete(task)
    File "/usr/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
      self.run_forever()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
      self._run_once()
    File "/usr/lib/python3.12/asyncio/base_events.py", line 1979, in _run_once
      handle._run()
    File "/usr/lib/python3.12/asyncio/events.py", line 88, in _run
      self._context.run(self._callback, *self._args)
    File "/opt/nyxos/tests/test_good_bot.py", line 58, in test_good_bot_trigger
      await NyxOS.on_message(message)
    File "/opt/nyxos/NyxOS.py", line 4307, in on_message
      user_obj = message.guild.get_member(sender_id)
    File "/usr/lib/python3.12/unittest/mock.py", line 1134, in __call__
      return self._mock_call(*args, **kwargs)
    File "/usr/lib/python3.12/unittest/mock.py", line 1138, in _mock_call
      return self._execute_mock_call(*args, **kwargs)
    await NyxOS.on_message(message)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_view_restoration.py::TestViewRestoration::test_verify_and_restore_bars
tests/test_window_persistence.py::TestWindowPersistence::test_view_persistence_across_reboot
  /opt/nyxos/NyxOS.py:1612: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    clean_cont = msg.content.strip()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_view_restoration.py::TestViewRestoration::test_verify_and_restore_bars
  /opt/nyxos/tests/test_view_restoration.py:77: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    await bot.verify_and_restore_bars()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_window_persistence.py::TestWindowPersistence::test_view_persistence_across_reboot
  /opt/nyxos/tests/test_window_persistence.py:68: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    await bot.verify_and_restore_bars()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================= 163 passed, 40 warnings in 127.26s (0:02:07) =================
